(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"1a66":function(e,t,i){"use strict";i.r(t);var o=i("7a23");const a=Object(o["l"])("label",{class:"text-h6"},"Combo Activities",-1),c={class:"flex justify-end tw-w-full tw-mt-5 sm:tw-mt-0 sm:tw-w-auto"},l=Object(o["l"])("div",{class:"tw-grid tw-grid-cols-1 tw-gap-4"},null,-1),n={key:0};function r(e,t,i,r,s,d){const b=Object(o["K"])("BaseButton"),u=Object(o["K"])("q-space"),m=Object(o["K"])("q-icon"),v=Object(o["K"])("BaseInput"),p=Object(o["K"])("q-chip"),O=Object(o["K"])("q-td"),j=Object(o["K"])("q-table"),y=Object(o["K"])("q-page");return Object(o["C"])(),Object(o["h"])(y,{padding:""},{default:Object(o["T"])((()=>[Object(o["l"])(j,{title:"Activitys",rows:e.items,columns:e.columns,color:"primary","row-key":"name",loading:e.loading,"rows-per-page-options":[0],"hide-pagination":""},{top:Object(o["T"])((()=>[a,Object(o["l"])(b,{class:"q-ml-md tw-absolute sm:tw-relative tw-top-0 tw-right-0 tw-mt-2 tw-mr-2 sm:tw-mt-0 sm:tw-mr-0",round:"",color:"primary",icon:"add",onClick:t[1]||(t[1]=t=>e.router.push({name:"CreateActivityCombo"}))}),Object(o["l"])(u),Object(o["l"])("div",c,[Object(o["l"])(v,{label:"Search",modelValue:e.search,"onUpdate:modelValue":t[2]||(t[2]=t=>e.search=t),clearable:"",class:"tw-w-full sm:tw-w-auto"},{append:Object(o["T"])((()=>[Object(o["l"])(m,{name:"search"})])),_:1},8,["modelValue"])])])),"body-cell-activities":Object(o["T"])((t=>[Object(o["l"])(O,{key:"activities",props:t},{default:Object(o["T"])((()=>[l,(Object(o["C"])(!0),Object(o["h"])(o["a"],null,Object(o["I"])(t.row.activities,((i,a)=>(Object(o["C"])(),Object(o["h"])("div",{key:i.id},[t.row.activities.length>1?(Object(o["C"])(),Object(o["h"])("span",n,[Object(o["l"])(m,{class:"q-mr-sm",name:"arrow_upward",color:e.loadingPriority||0==a?"grey":"orange",style:{"font-size":"20px",cursor:"pointer"},onClick:()=>e.loadingPriority||e.priority(i.id)},null,8,["color","onClick"]),Object(o["l"])(m,{class:"q-mr-sm",name:"arrow_downward",color:e.loadingPriority||a==t.row.activities.length-1?"grey":"orange",style:{"font-size":"20px",cursor:"pointer"},onClick:()=>e.loadingPriority||a==t.row.activities.length-1||e.priority(i.id,!0)},null,8,["color","onClick"])])):Object(o["i"])("",!0),Object(o["l"])(p,{removable:"",onRemove:t=>e.removeActivityCombo(i.id)},{default:Object(o["T"])((()=>[Object(o["k"])(Object(o["O"])(i.activity.name),1)])),_:2},1032,["onRemove"])])))),128))])),_:2},1032,["props"])])),"body-cell-icon":Object(o["T"])((t=>[Object(o["l"])(O,{key:"icon",props:t},{default:Object(o["T"])((()=>[Object(o["l"])(m,{class:"q-mr-sm",name:"edit",color:"teal",style:{"font-size":"20px",cursor:"pointer"},onClick:i=>e.edit(t.row)},null,8,["onClick"]),Object(o["l"])(m,{name:"delete",color:"negative",style:{"font-size":"20px",cursor:"pointer"},onClick:i=>e.remove(t.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading"])])),_:1})}var s=i("b64a"),d=i("6c02"),b=i("1840"),u=i("7d9c"),m=i("7b9e"),v=i("b3fe"),p=i("749b"),O=i("5c8a"),j=i("97be");const y=[{label:"Name",field:"name",align:"left"},{label:"Destination",align:"left",field:e=>{var t;return null===(t=e.destination)||void 0===t?void 0:t.name}},{name:"activities",label:"Activities",align:"left",field:"activities"},{name:"icon",label:"",field:"",align:"right"}];var w=Object(o["m"])({setup(){const e=Object(d["d"])(),t=Object(v["a"])();let{list:i,activitiesCombo:o,variablesListQuery:a}=Object(s["a"])(),{loading:c,search:l,getActivities:n}=i();n(void 0,void 0,{fetchPolicy:"network-only"});const{mutate:r,onError:w,onDone:g}=Object(b["d"])(u["deleteActivityMutation"],(()=>({update:(e,{data:{deleteActivity:{activity:{id:t}}}})=>{let i=e.readQuery({query:u["listActivityQuery"],variables:a.value});i&&(o.value=i.listActivities.filter((e=>e.id!=t)),e.writeQuery({query:u["listActivityQuery"],data:{listActivities:o.value},variables:a.value}))}})));w((e=>{Object(m["b"])(e)})),g((()=>{Object(m["c"])({message:"The activity have been deleted."})}));const{mutate:f,onDone:h,loading:C}=Object(b["d"])(u["priorityActivityComboMutation"]);h((()=>{n(void 0,void 0,{fetchPolicy:"network-only"})}));const{mutate:k,onDone:A}=Object(b["d"])(u["deleteActivityComboMutation"]);return A((()=>{n(void 0,void 0,{fetchPolicy:"network-only"})})),{items:o,columns:y,loading:c,router:e,search:l,truncate:p["a"],format:j["a"],loadingPriority:C,edit(t){const{item:i}=Object(s["a"])();i.value=Object(O["a"])(t),e.push({name:"EditActivityCombo",params:{id:t._id}})},remove(e){t.dialog({title:"Confirm",message:"Would you like to delete this activity?",cancel:!0,persistent:!0}).onOk((()=>{r({input:{id:e.id}})}))},priority(e,t=!1){C.value||f({input:{id:e,up:!t}})},removeActivityCombo(e){k({input:{id:e}})}}}}),g=i("9989"),f=i("eaac"),h=i("2c91"),C=i("0016"),k=i("db86"),A=i("b047"),q=i("eebe"),Q=i.n(q);w.render=r;t["default"]=w;Q()(w,"components",{QPage:g["a"],QTable:f["a"],QSpace:h["a"],QIcon:C["a"],QTd:k["a"],QChip:A["a"]})}}]);