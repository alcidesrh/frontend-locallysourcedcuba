(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[17],{"2d2d":function(e,a,t){"use strict";t.r(a);var n=t("7a23");function i(e,a,t,i,o,l){const s=Object(n["K"])("q-icon"),r=Object(n["K"])("q-td"),c=Object(n["K"])("BaseTable"),d=Object(n["K"])("q-page");return Object(n["C"])(),Object(n["h"])(d,{padding:""},{default:Object(n["T"])((()=>[Object(n["l"])(c,{title:"Destinations",rows:e.items,columns:e.columns,loading:e.loading,pagination:e.pagination,"onUpdate:pagination":a[1]||(a[1]=a=>e.pagination=a),onRequest:e.onRequest,createRoute:"CreateDestination",search:e.search,"onUpdate:search":a[2]||(a[2]=a=>e.search=a)},{"body-cell-icon":Object(n["T"])((a=>[Object(n["l"])(r,{key:"icon",props:a},{default:Object(n["T"])((()=>[Object(n["l"])(s,{class:"q-mr-sm",name:"edit",color:"teal",style:{"font-size":"20px",cursor:"pointer"},onClick:t=>e.edit(a.row)},null,8,["onClick"]),Object(n["l"])(s,{name:"delete",color:"negative",style:{"font-size":"20px",cursor:"pointer"},onClick:t=>e.remove(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","onRequest","search"])])),_:1})}var o=t("d2da"),l=t("6c02"),s=t("1840"),r=t("581a"),c=t("7b9e"),d=t("b3fe");const u=[{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:"name"},{name:"province",required:!0,label:"Province",align:"left",field:e=>e.province.name},{name:"icon",label:"",field:"",align:"right"}];var g=Object(n["m"])({setup(){const e=Object(l["d"])(),a=Object(d["a"])();let{list:t,items:n,sortBy:i,variablesListQuery:g}=Object(o["a"])(),{pagination:b,loading:p,search:v}=t();const m=a.localStorage.getItem("destinationRowsPerPage");m&&(b.value.rowsPerPage=m);const{mutate:O,onError:j,onDone:w}=Object(s["d"])(r["deleteDestinationMutation"],(()=>({update:(e,{data:{deleteDestination:{destination:{id:a}}}})=>{let t=e.readQuery({query:r["listDestinationQuery"],variables:g.value});t&&(n.value=t.listDestinations.collection.filter((e=>e.id!=a)),e.writeQuery({query:r["listDestinationQuery"],data:{listDestinations:{collection:n.value}},variables:g.value}))}})));return j((e=>{Object(c["b"])(e)})),w((()=>{Object(c["c"])({message:"The destination have been deleted."})})),{items:n,columns:u,loading:p,pagination:b,router:e,deleteDestination:O,search:v,onRequest(e){const{page:t,rowsPerPage:n,sortBy:o,descending:l}=e.pagination;b.value.descending!=l?l?i.value&&"ASC"==i.value[0].name&&(i.value=[{name:"DESC"}]):i.value||(i.value=[{name:"ASC"}]):b.value.page==t&&b.value.descending==l==1&&n==b.value.rowsPerPage&&(i.value=null),n!=b.value.rowsPerPage&&a.localStorage.set("destinationRowsPerPage",n),b.value.page=b.value.rowsPerPage!=n?1:t,b.value.rowsPerPage=0==n?1e5:n,b.value.sortBy=o,b.value.descending=l},edit(a){const{item:t}=Object(o["a"])();t.value=Object.assign({},a),e.push({name:"EditDestination",params:{id:a._id}})},remove(e){a.dialog({title:"Confirm",message:"Would you like to delete this destination?",cancel:!0,persistent:!0}).onOk((()=>{O({input:{id:e.id}})}))}}}}),b=t("9989"),p=t("db86"),v=t("0016"),m=t("eebe"),O=t.n(m);g.render=i;a["default"]=g;O()(g,"components",{QPage:b["a"],QTd:p["a"],QIcon:v["a"]})}}]);