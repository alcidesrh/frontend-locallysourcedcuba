(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[20],{"615a":function(e,a,t){"use strict";t.r(a);var r=t("7a23");function n(e,a,t,n,l,i){const o=Object(r["K"])("q-icon"),s=Object(r["K"])("q-td"),c=Object(r["K"])("BaseTable"),d=Object(r["K"])("q-page");return Object(r["C"])(),Object(r["h"])(d,{padding:""},{default:Object(r["T"])((()=>[Object(r["l"])(c,{title:"Drivers",rows:e.items,columns:e.columns,loading:e.loading,pagination:e.pagination,"onUpdate:pagination":a[1]||(a[1]=a=>e.pagination=a),onRequest:e.onRequest,createRoute:"CreateDriver",search:e.search,"onUpdate:search":a[2]||(a[2]=a=>e.search=a)},{"body-cell-icon":Object(r["T"])((a=>[Object(r["l"])(s,{key:"icon",props:a},{default:Object(r["T"])((()=>[Object(r["l"])(o,{class:"q-mr-sm",name:"edit",color:"teal",style:{"font-size":"20px",cursor:"pointer"},onClick:t=>e.edit(a.row)},null,8,["onClick"]),Object(r["l"])(o,{name:"delete",color:"negative",style:{"font-size":"20px",cursor:"pointer"},onClick:t=>e.remove(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","onRequest","search"])])),_:1})}var l=t("6cf1"),i=t("6c02"),o=t("1840"),s=t("53bf"),c=t("7b9e"),d=t("b3fe");const u=[{name:"name",required:!0,label:"Name",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"phone",label:"Phone",field:"phone",align:"left"},{name:"pax",label:"Pax. #",field:"pax",align:"left"},{name:"icon",label:"",field:"",align:"right"}];var v=Object(r["m"])({setup(){const e=Object(i["d"])(),a=Object(d["a"])();let{list:t,items:r,sortBy:n,variablesListQuery:v}=Object(l["a"])(),{pagination:g,loading:b,search:p}=t();const m=a.localStorage.getItem("driverRowsPerPage");m&&(g.value.rowsPerPage=m);const{mutate:O,onError:j,onDone:f}=Object(o["d"])(s["deleteDriverMutation"],(()=>({update:(e,{data:{deleteDriver:{driver:{id:a}}}})=>{let t=e.readQuery({query:s["listDriverQuery"],variables:v.value});t&&(r.value=t.listDrivers.collection.filter((e=>e.id!=a)),e.writeQuery({query:s["listDriverQuery"],data:{listDrivers:{collection:r.value}},variables:v.value}))}})));return j((e=>{Object(c["b"])(e)})),f((()=>{Object(c["c"])({message:"The driver have been deleted."})})),{items:r,columns:u,loading:b,pagination:g,router:e,deleteDriver:O,search:p,onRequest(e){const{page:t,rowsPerPage:r,sortBy:l,descending:i}=e.pagination;g.value.descending!=i?i?n.value&&"ASC"==n.value[0].name&&(n.value=[{name:"DESC"}]):n.value||(n.value=[{name:"ASC"}]):g.value.page==t&&g.value.descending==i==1&&r==g.value.rowsPerPage&&(n.value=null),r!=g.value.rowsPerPage&&a.localStorage.set("driverRowsPerPage",r),g.value.page=g.value.rowsPerPage!=r?1:t,g.value.rowsPerPage=0==r?1e5:r,g.value.sortBy=l,g.value.descending=i},edit(a){const{item:t}=Object(l["a"])();t.value=Object.assign({},a),e.push({name:"EditDriver",params:{id:a._id}})},remove(e){a.dialog({title:"Confirm",message:"Would you like to delete this driver?",cancel:!0,persistent:!0}).onOk((()=>{O({input:{id:e.id}})}))}}}}),g=t("9989"),b=t("db86"),p=t("0016"),m=t("eebe"),O=t.n(m);v.render=n;a["default"]=v;O()(v,"components",{QPage:g["a"],QTd:b["a"],QIcon:p["a"]})}}]);