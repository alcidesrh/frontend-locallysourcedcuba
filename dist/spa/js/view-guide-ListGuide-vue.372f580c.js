(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"6be2":function(e,a,t){"use strict";t.r(a);var l=t("7a23");function n(e,a,t,n,i,o){const s=Object(l["K"])("q-icon"),r=Object(l["K"])("q-td"),u=Object(l["K"])("BaseTable"),c=Object(l["K"])("q-page");return Object(l["C"])(),Object(l["h"])(c,{padding:""},{default:Object(l["T"])((()=>[Object(l["l"])(u,{title:"Guides",rows:e.items,columns:e.columns,color:"primary",loading:e.loading,pagination:e.pagination,"onUpdate:pagination":a[1]||(a[1]=a=>e.pagination=a),onRequest:e.onRequest,createRoute:"CreateGuide",search:e.search,"onUpdate:search":a[2]||(a[2]=a=>e.search=a)},{"body-cell-icon":Object(l["T"])((a=>[Object(l["l"])(r,{key:"icon",props:a},{default:Object(l["T"])((()=>[Object(l["l"])(s,{class:"q-mr-sm",name:"edit",color:"teal",style:{"font-size":"20px",cursor:"pointer"},onClick:t=>e.edit(a.row)},null,8,["onClick"]),Object(l["l"])(s,{name:"delete",color:"negative",style:{"font-size":"20px",cursor:"pointer"},onClick:t=>e.remove(a.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","onRequest","search"])])),_:1})}var i=t("c0ce"),o=t("6c02"),s=t("1840"),r=t("5daf"),u=t("7b9e"),c=t("b3fe");const d=[{name:"fullName",required:!0,label:"Name",align:"left",field:e=>`${e.name} ${e.lastName||""}`,sortable:!0},{name:"email",align:"left",label:"Email",field:"email"},{name:"phone",label:"Phone",field:"phone",align:"left"},{name:"bonus",label:"Bonus",field:"bonus",align:"left"},{name:"icon",label:"",field:"",align:"right"}];var g=Object(l["m"])({setup(){const e=Object(o["d"])(),a=Object(c["a"])();let{list:t,items:l,sortBy:n,variablesListQuery:g}=Object(i["a"])(),{pagination:b,loading:m,search:p}=t();const v=a.localStorage.getItem("guideRowsPerPage");v&&(b.value.rowsPerPage=v);const{mutate:O,onError:j,onDone:f}=Object(s["d"])(r["deleteGuideMutation"],(()=>({update:(e,{data:{deleteGuide:{guide:{id:a}}}})=>{let t=e.readQuery({query:r["listGuideQuery"],variables:g.value});t&&(l.value=t.listGuides.collection.filter((e=>e.id!=a)),e.writeQuery({query:r["listGuideQuery"],data:{listGuides:{collection:l.value}},variables:g.value}))}})));return j((e=>{Object(u["b"])(e)})),f((()=>{Object(u["c"])({message:"The guide have been deleted."})})),{items:l,columns:d,loading:m,pagination:b,router:e,deleteGuide:O,search:p,onRequest(e){const{page:t,rowsPerPage:l,sortBy:i,descending:o}=e.pagination;b.value.descending!=o?o?n.value&&"ASC"==n.value[0].name&&(n.value=[{name:"DESC"}]):n.value||(n.value=[{name:"ASC"}]):b.value.page==t&&b.value.descending==o==1&&l==b.value.rowsPerPage&&(n.value=null),l!=b.value.rowsPerPage&&a.localStorage.set("guideRowsPerPage",l),b.value.page=b.value.rowsPerPage!=l?1:t,b.value.rowsPerPage=0==l?1e5:l,b.value.sortBy=i,b.value.descending=o},edit(a){const{item:t}=Object(i["a"])();t.value=Object.assign({},a),e.push({name:"EditGuide",params:{id:a._id}})},remove(e){a.dialog({title:"Confirm",message:"Would you like to delete this guide?",cancel:!0,persistent:!0}).onOk((()=>{O({input:{id:e.id}})}))}}}}),b=t("9989"),m=t("db86"),p=t("0016"),v=t("eebe"),O=t.n(v);g.render=n;a["default"]=g;O()(g,"components",{QPage:b["a"],QTd:m["a"],QIcon:p["a"]})}}]);