(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[40],{"1d72":function(e,t,o){"use strict";o.r(t);var i=o("7a23");function a(e,t,o,a,n,l){const c=Object(i["K"])("q-icon"),r=Object(i["K"])("q-td"),s=Object(i["K"])("BaseTable"),d=Object(i["K"])("q-page");return Object(i["C"])(),Object(i["h"])(d,null,{default:Object(i["T"])((()=>[Object(i["l"])(s,{title:"Notifications",rows:e.items,columns:e.columns,loading:e.loading,pagination:e.pagination,"onUpdate:pagination":t[1]||(t[1]=t=>e.pagination=t),onRequest:e.onRequest,createRoute:"CreateNotification",search:e.search,"onUpdate:search":t[2]||(t[2]=t=>e.search=t)},{"body-cell-notification_icon":Object(i["T"])((e=>[Object(i["l"])(r,{key:"notification_icon",props:e},{default:Object(i["T"])((()=>[e.row.icon?(Object(i["C"])(),Object(i["h"])(c,{key:0,class:"tw-text-lg notification-icon-color",name:e.row.icon},null,8,["name"])):Object(i["i"])("",!0)])),_:2},1032,["props"])])),"body-cell-services":Object(i["T"])((e=>[Object(i["l"])(r,{key:"services",props:e},{default:Object(i["T"])((()=>[(Object(i["C"])(!0),Object(i["h"])(i["a"],null,Object(i["I"])(e.row.services,((t,o)=>(Object(i["C"])(),Object(i["h"])("label",{key:t.id,textContent:Object(i["O"])(`${t.name}${o<e.row.services.length-1?", ":""}`)},null,8,["textContent"])))),128))])),_:2},1032,["props"])])),"body-cell-icon":Object(i["T"])((t=>[Object(i["l"])(r,{key:"icon",props:t},{default:Object(i["T"])((()=>[Object(i["l"])(c,{class:"q-mr-sm",name:"arrow_upward",color:e.loading||e.pagination.sortBy||0==t.rowIndex&&1==e.pagination.page?"grey":"orange",style:{"font-size":"20px",cursor:"pointer"},onClick:()=>e.loading||e.pagination.sortBy||0==t.rowIndex&&1==e.pagination.page||e.priority(t.row.id)},null,8,["color","onClick"]),Object(i["l"])(c,{class:"q-mr-sm",name:"arrow_downward",color:e.loading||e.pagination.sortBy||t.rowIndex==e.pagination.rowsNumber-1?"grey":"orange",style:{"font-size":"20px",cursor:"pointer"},onClick:()=>e.loading||e.pagination.sortBy||t.rowIndex==e.pagination.rowsNumber-1||e.priority(t.row.id,!0)},null,8,["color","onClick"]),Object(i["l"])(c,{class:"q-mr-sm",name:"edit",color:"teal",style:{"font-size":"20px",cursor:"pointer"},onClick:o=>e.edit(t.row)},null,8,["onClick"]),Object(i["l"])(c,{name:"delete",color:"negative",style:{"font-size":"20px",cursor:"pointer"},onClick:o=>e.remove(t.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","pagination","onRequest","search"])])),_:1})}var n=o("ddd6"),l=o("6c02"),c=o("1840"),r=o("3771"),s=o("7b9e"),d=o("b3fe");const u=[{name:"name",required:!0,label:"Name",align:"left",sortable:!0,field:"name"},{name:"notification_icon",align:"left",label:"Icon",field:"icon"},{name:"days",label:"Days",field:"days",align:"left"},{name:"services",label:"Services",field:"services",align:"left"},{name:"icon",label:"",field:"",align:"right"}];var g=Object(i["m"])({setup(){const e=Object(l["d"])(),t=Object(d["a"])();let{list:o,items:a,sortBy:g,variablesListQuery:b}=Object(n["a"])(),{pagination:p,loading:f,search:m,getNotifications:v}=o();v();const O=t.localStorage.getItem("notificationRowsPerPage");O&&(p.value.rowsPerPage=O);const{mutate:j,onError:y,onDone:w,loading:C}=Object(c["d"])(r["deleteNotificationMutation"],(()=>({update:(e,{data:{deleteNotification:{notification:{id:t}}}})=>{let o=e.readQuery({query:r["listNotificationQuery"],variables:b.value});o&&(a.value=o.listNotifications.collection.filter((e=>e.id!=t)),e.writeQuery({query:r["listNotificationQuery"],data:{listNotifications:{collection:a.value}},variables:b.value}))}})));y((e=>{Object(s["b"])(e)})),w((()=>{Object(s["c"])({message:"The notification have been deleted."})}));const{mutate:h,onDone:k,loading:P}=Object(c["d"])(r["priorityNotificationMutation"]);k((()=>{v(void 0,void 0,{fetchPolicy:"network-only"})}));const N=Object(i["f"])((()=>f.value||C.value||P.value));return{items:a,columns:u,loading:N,pagination:p,router:e,deleteNotification:j,search:m,onRequest(e){const{page:o,rowsPerPage:i,sortBy:a,descending:n}=e.pagination;p.value.descending!=n?n?g.value&&"ASC"==g.value[0].name&&(g.value=[{name:"DESC"}]):g.value||(g.value=[{name:"ASC"}]):p.value.page==o&&p.value.descending==n==1&&i==p.value.rowsPerPage&&(g.value=[{priority:"ASC"}]),i!=p.value.rowsPerPage&&t.localStorage.set("notificationRowsPerPage",i),p.value.page=p.value.rowsPerPage!=i?1:o,p.value.rowsPerPage=0==i?1e5:i,p.value.sortBy=a,p.value.descending=n},edit(t){const{item:o}=Object(n["a"])();o.value=Object.assign({},t),e.push({name:"EditNotification",params:{id:t._id}})},remove(e){t.dialog({title:"Confirm",message:"Would you like to delete this notification?",cancel:!0,persistent:!0}).onOk((()=>{j({input:{id:e.id}})}))},priority(e,t=!1){N.value||h({input:{id:e,up:!t}})}}}}),b=o("9989"),p=o("db86"),f=o("0016"),m=o("eebe"),v=o.n(m);g.render=a;t["default"]=g;v()(g,"components",{QPage:b["a"],QTd:p["a"],QIcon:f["a"]})}}]);