(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[59],{a40f:function(t,e,a){"use strict";a.r(e);var l=a("7a23");const n={key:0,class:"tw-absolute tw-top-1 tw-right-1"},s={key:0,style:{left:"-8px",top:"-9px",background:"whitesmoke"},class:"tw-text-xs tw-transform tw--rotate-12 tw-font-bold tw-uppercase tw-text-red-700 tw-border tw-border-red-700 tw-absolute"},c={class:"tw-p-0 tw-font-semibold tw-text-white tw-flex tw-items-center"},o={class:"tw-bg-gray-700 tw-tracking-widest tw-cursor-pointer",style:{"border-radius":"50px",padding:"0px 10px"}},r={class:"tw-ml-3"},i={class:"row tw-w-full"},b={class:"col-12 tw-flex tw-items-center tw-mt-5"},d={class:"row"},u={class:"col tw-flex tw-items-center",style:{"max-width":"150px"}},w={class:"col tw-flex tw-items-center"},f={key:0,style:{left:"-8px",top:"-9px",background:"whitesmoke"},class:"tw-text-xs tw-transform tw--rotate-12 tw-font-bold tw-uppercase tw-text-red-700 tw-border tw-border-red-700 tw-absolute"},O={class:"tw-p-0 tw-font-semibold tw-text-white tw-flex tw-items-center"},j={class:"tw-bg-gray-700 tw-tracking-widest tw-cursor-pointer",style:{"border-radius":"50px",padding:"0px 10px"}},p={class:"tw-ml-3"},g={key:0,class:"tw-p-10 tw-text-center tw-text-gray-400 tw-font-semibold tw-text-md"},m=Object(l["l"])("label",null,"No result found",-1);function h(t,e,a,h,x,y){const v=Object(l["K"])("q-badge"),k=Object(l["K"])("q-icon"),C=Object(l["K"])("q-chip"),T=Object(l["K"])("q-item"),Y=Object(l["K"])("q-list"),S=Object(l["K"])("q-menu"),D=Object(l["K"])("q-btn"),M=Object(l["K"])("SearchTransfer"),_=Object(l["K"])("q-card"),Q=Object(l["K"])("q-item-section"),q=Object(l["K"])("q-separator"),I=Object(l["K"])("q-page"),K=Object(l["K"])("ShowTransfer"),P=Object(l["L"])("close-popup");return Object(l["C"])(),Object(l["h"])(l["a"],null,[Object(l["l"])(I,{padding:""},{default:Object(l["T"])((()=>[Object(l["l"])(_,{flat:"",class:"tw-mt-0 tw-flex tw-items-center tw-p-5"},{default:Object(l["T"])((()=>[t.loadingNotifications?Object(l["i"])("",!0):(Object(l["C"])(),Object(l["h"])("div",n,[(Object(l["C"])(!0),Object(l["h"])(l["a"],null,Object(l["I"])(t.menu,((e,a)=>(Object(l["C"])(),Object(l["h"])(D,{size:"md",dense:"",flat:"",key:e,icon:e.icon,class:[{"text-orange-8":e.notificationsPending.length,"text-teal":!e.notificationsPending.length},"tw-text-2xl tw-cursor-pointer tw-mx-1"]},{default:Object(l["T"])((()=>[e.notificationsPending.length?(Object(l["C"])(),Object(l["h"])(v,{key:0,color:"indigo",floating:""},{default:Object(l["T"])((()=>[Object(l["k"])(Object(l["O"])(e.notificationsPending.length),1)])),_:2},1024)):Object(l["i"])("",!0),e.notificationsPending.length?(Object(l["C"])(),Object(l["h"])(S,{key:1,modelValue:t.menuStates[a],"onUpdate:modelValue":e=>t.menuStates[a]=e},{default:Object(l["T"])((()=>[Object(l["l"])(Y,{style:{"min-width":"200px"},class:"tw-py-3"},{default:Object(l["T"])((()=>[(Object(l["C"])(!0),Object(l["h"])(l["a"],null,Object(l["I"])(e.notificationsPending,((e,a)=>Object(l["U"])((Object(l["C"])(),Object(l["h"])(T,{class:"tw-px-2",clickable:"",key:a,style:{"min-height":"44px",padding:"4px 12px"}},{default:Object(l["T"])((()=>{var a;return[Object(l["l"])("span",{class:"tw-cursor-pointer",onClick:a=>t.show(e)},[Object(l["l"])(C,{class:"tw-mr-2 tw-py-3 tw-my-2",style:{backgroundColor:null===(a=e.tour)||void 0===a?void 0:a.color}},{default:Object(l["T"])((()=>{var t,a;return[e.canceled?(Object(l["C"])(),Object(l["h"])("div",s,"Canceled")):Object(l["i"])("",!0),Object(l["l"])("div",c,[Object(l["l"])("label",o,[Object(l["l"])(k,{name:"In"==e.type?"flight_land":"flight_takeoff",color:"white",style:{"font-size":"20px"}},null,8,["name"]),Object(l["k"])(" "+Object(l["O"])(e.type),1)]),Object(l["l"])("span",r,[Object(l["l"])(k,{style:{"border-radius":"50px","font-size":"15px"},class:["tw-mx-1 tw-bg-gray-100 tw-p-1 tw-cursor-pointer",{"tw-text-gray-500":!e.flightData,"text-teal":e.flightData}],name:"flight"},null,8,["class"]),Object(l["l"])(k,{style:{"border-radius":"50px","font-size":"15px"},class:["tw-mx-1 tw-bg-gray-100 tw-p-1 tw-cursor-pointer",{"tw-text-gray-500":!(null!==(t=e.houses)&&void 0!==t&&t.length),"text-teal":null===(a=e.houses)||void 0===a?void 0:a.length}],name:"home"},null,8,["class"]),Object(l["l"])(k,{name:"email",style:{"border-radius":"50px","font-size":"15px"},class:["tw-mx-1 tw-bg-gray-100 tw-p-1 tw-cursor-pointer",{"tw-text-gray-500":!e.sent,"text-teal":e.sent}]},null,8,["class"])])])]})),_:2},1032,["style"])],8,["onClick"])]})),_:2},1536)),[[P]]))),128))])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])):Object(l["i"])("",!0)])),_:2},1032,["icon","class"])))),128))])),Object(l["l"])("div",i,[Object(l["l"])("div",b,["transfer"==t.service.code?(Object(l["C"])(),Object(l["h"])(M,{key:0})):Object(l["i"])("",!0)])])])),_:1}),t.service.daysToShow?(Object(l["C"])(),Object(l["h"])("div",{key:0,class:"tw-text-right tw-pt-5 tw-font-semibold tw-text-gray-700",innerHTML:t.showing},null,8,["innerHTML"])):Object(l["i"])("",!0),Object(l["l"])(Y,{class:"tw-mt-5"},{default:Object(l["T"])((()=>[(Object(l["C"])(!0),Object(l["h"])(l["a"],null,Object(l["I"])(Object.keys(t.transfers),((e,a)=>(Object(l["C"])(),Object(l["h"])("div",{key:a},[Object(l["l"])(T,null,{default:Object(l["T"])((()=>[Object(l["l"])(Q,null,{default:Object(l["T"])((()=>[Object(l["l"])("div",d,[Object(l["l"])("div",u,[Object(l["l"])("div",{class:"tw-text-gray-500 tw-font-semibold tw-text-center",innerHTML:t.dateColumn(e)},null,8,["innerHTML"])]),Object(l["l"])("div",w,[Object(l["l"])("div",null,[(Object(l["C"])(!0),Object(l["h"])(l["a"],null,Object(l["I"])(t.transfers[e],((e,a)=>(Object(l["C"])(),Object(l["h"])("span",{class:"tw-cursor-pointer",key:e.id,onClick:a=>t.show(e)},[Object(l["l"])(C,{class:"tw-mr-2 tw-py-3 tw-my-2",style:{backgroundColor:e.bookingIn?e.bookingIn.tour.color:e.bookingOut.tour.color}},{default:Object(l["T"])((()=>[e.canceled?(Object(l["C"])(),Object(l["h"])("div",f,"Canceled")):Object(l["i"])("",!0),Object(l["l"])("div",O,[Object(l["l"])("label",j,[Object(l["l"])(k,{name:"In"==e.type?"flight_land":"flight_takeoff",color:"white",style:{"font-size":"20px"}},null,8,["name"]),Object(l["k"])(" "+Object(l["O"])(e.type),1)]),Object(l["l"])("span",p,[Object(l["l"])(k,{style:{"border-radius":"50px","font-size":"15px"},class:["tw-mx-1 tw-bg-gray-100 tw-p-1 tw-cursor-pointer",{"tw-text-gray-500":!e.flightData,"text-teal":e.flightData}],name:"flight"},null,8,["class"]),Object(l["l"])(k,{style:{"border-radius":"50px","font-size":"15px"},class:["tw-mx-1 tw-bg-gray-100 tw-p-1 tw-cursor-pointer",{"tw-text-gray-500":!e.houses.length,"text-teal":e.houses.length}],name:"home"},null,8,["class"]),Object(l["l"])(k,{onClick:Object(l["V"])((l=>t.updateSentNotification(e,a)),["stop"]),name:"email",style:{"border-radius":"50px","font-size":"15px"},class:["tw-mx-1 tw-bg-gray-100 tw-p-1 tw-cursor-pointer",{"tw-text-gray-500":!e.sent,"text-teal":e.sent}]},null,8,["onClick","class"])])])])),_:2},1032,["style"])],8,["onClick"])))),128))])])])])),_:2},1024)])),_:2},1024),Object(l["l"])(q,{spaced:"",inset:""})])))),128)),Object.keys(t.transfers).length||t.loadingList?Object(l["i"])("",!0):(Object(l["C"])(),Object(l["h"])("div",g,[m]))])),_:1})])),_:1}),t.transferToShow?(Object(l["C"])(),Object(l["h"])(K,{transfer:t.transferToShow,key:t.refresh,onEdit:t.edit,onRemove:t.remove,onUpdateNotification:t.updateSentNotification},null,8,["transfer","onEdit","onRemove","onUpdateNotification"])):Object(l["i"])("",!0)],64)}var x=a("5f06"),y=a("5a0c"),v=a.n(y),k=a("3203"),C=a("3a18"),T=a("3b56"),Y=a("f8ed"),S=a("2887"),D=a("1fcf"),M=Object(l["m"])({components:{ShowTransfer:T["default"],SearchTransfer:Y["default"]},setup(){const t=Object(l["H"])(null),e=Object(l["H"])(!1),{list:a,items:n,search:s,getIncompleteTransfers:c}=Object(x["a"])(),{getTransfer:o,loading:r}=a(),i=Object(l["H"])([]),{onResult:b,getPendingTransfersNotifications:d,loading:u}=c();b((t=>{i.value=t.data.incompleteBookingTransfers}));const{setServiceInUse:w,service:f}=Object(k["a"])();if(Object(l["S"])((()=>f.value.code),(()=>{d()})),"transfer"!=f.value.code){const{getService:t}=w();t("transfer")}if(Object(l["E"])("service",f),n.value.length){const t=C["apolloClient"].cache.readQuery({query:S["listBookingTransferQuery"],variables:s.value});t&&(n.value=Object(D["i"])(t.listBookingTransfers))}else o();const O=Object(l["f"])((()=>{let t=[];return n.value.forEach((e=>{const a=v()(e.date).format("MM/DD/YYYY");t[a]||(t[a]=[]),t[a].push(e)})),t})),j=Object(l["H"])(Array.from({length:3},(()=>!1)));return{transferToShow:t,refresh:e,service:f,loadingList:r,loadingNotifications:u,transfers:O,dateColumn(t){return`<div>${v()(t).format("dddd")}</div><div>${v()(t).format("DD/MM/YYYY")}</div>`},showing:Object(l["f"])((()=>{let t="",e="";return t=s.value.from?v()(s.value.from).format("DD/MM/YYYY"):v()().format("DD/MM/YYYY"),e=s.value.to?v()(s.value.to).format("DD/MM/YYYY"):v()(s.value.from||new Date).add(f.value.daysToShow||0,"day").format("DD/MM/YYYY"),`<span class="tw-text-gray-700">Showing </span> ${v()(s.value.to||new Date).diff(s.value.from||new Date,"day")||f.value.daysToShow}<span class="tw-text-gray-700"> days. From</span> `+t+' <span class="tw-text-gray-700">to</span> '+e})),show(a){t.value=a,e.value=!e.value},menu:Object(l["f"])((()=>["flight_takeoff","home","email"].map(((t,e)=>({icon:t,notificationsPending:i.value.filter((t=>{var a;return 0==e&&!t.flightData||1==e&&!(null===(a=t.houses)||void 0===a?void 0:a.length)||2==e&&!t.sent}))}))))),menuStates:j,updateSentNotification(t,e){e||(e=n.value.indexOf(t)),C["apolloClient"].mutate({mutation:S["updateBookingTransferMutation"],variables:{input:{id:t.id,sent:!t.sent}}}).then((()=>{t.sent=!t.sent,C["apolloClient"].cache.writeQuery({query:S["listBookingTransferQuery"],data:{listBookingTransfers:n.value},variables:s.value})}))}}}}),_=a("9989"),Q=a("f09f"),q=a("9c40"),I=a("58a81"),K=a("4e73"),P=a("1c1c"),z=a("66e5"),N=a("b047"),B=a("0016"),H=a("4074"),L=a("eb85"),U=a("7f67"),V=a("eebe"),E=a.n(V);M.render=h;e["default"]=M;E()(M,"components",{QPage:_["a"],QCard:Q["a"],QBtn:q["a"],QBadge:I["a"],QMenu:K["a"],QList:P["a"],QItem:z["a"],QChip:N["a"],QIcon:B["a"],QItemSection:H["a"],QSeparator:L["a"]}),E()(M,"directives",{ClosePopup:U["a"]})}}]);